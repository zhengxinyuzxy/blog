# 2023/07/17想法来源

### 关于spring的bean

- 郑鑫雨
00:00:00
今日八股应粉丝要求咱们再讲一讲spring当中病的生命周期，咱们是捅了spring的马蜂窝了。所谓生命周期，它描述的是一件事物由生到死，或者是从无到有，再从有到无的整个生命历程。spring当中的病，咱们以后简称病，对于一个病而言，我们描述它的生命周期，指的就是从创建到销毁的整个过程。在这个过程当中，由容器统一管理这个病的生命周期，并由容器在合适的时机通过各种各样的方法处理这个病。这其中每一个方法都属于病的一个生命周期节点。如果大家还能听到这儿，请在评论区里边回复六六六，也算对南哥的一种支持。
郑鑫雨
00:00:44
那咱们首先要聊的就是一个病，它如何被创建spring在启动之初会通过加载叉mail或者扫包解释注解，得到所有病的定义，我们称之为bean definition。在bean definition当中保存了每一个病的所有的元数据。
郑鑫雨
00:01:00
有了这些病的定义，也就是咱们病的原数据之后，同时spring容器咱们的病工厂所有的工作都准备好之后，就开始初始化所有的单例病了。在这个里边大家需要搞清楚一点，咱们的spring容器仅仅管理单粒病的整个生命周期。从此时此刻开始，一个病正式要登场。那么此时此刻病的第一个生命周期节点就开始了，叫创建。创建一个病最常用的方式就是调用它的午餐构造。当然还有其他的方式方法，比如咱们配置对象工厂，由工厂方法为我们提供一个具体的病实例。一个病被创建之后，紧接着要做的就是属性填充，也就是通过依赖注入对成员变量进行复制。在一般情况下，我们通过创建和属性填充，基本上就可以完成一个病的创建。但spring作为一个非常灵活的框架，它有很多的扩展。比如咱们的spring m v c，spring security, spring boot等等，甚至很多大型企业也会基于spring扩展自己企业专属的框架。
郑鑫雨
00:02:05
所以我们的spring对咱们的病的整个生命周期做了非常多的扩展性。最核心的目的就是为了让这些框架可以更好的发挥自己的能力。而对于咱们的日常工作，可能接触的并不是特别多。来咱们接着聊一个病，经过创建和属性填充之后，基本上就已经成为了一个可用对象。但事实上还不够，我们可以为spring的每一个，并在自定义一个初始化方法。在这个初始化方法里边，我们可以做很多其他的事情。比如说加载查询文件、初始化数据源等等一系列的工作。这就成了spring病当中的第三个生命周期。最后，我们还可以为每一个病单独的定立一个销毁方法。在space容器关闭的时候，会销毁所有的病，同时调用它的destroy方法。你以为到此为止就结束了吗？不，并没为了提升整个spring框架的灵活性，spring在病的创建过程当中还提供了很多拦截性的功能。
郑鑫雨
00:03:06
比如在我们实例化一个对象的前和后，在我们调用初始化方法的前和后，都可以对咱们的病做一些额外的处理。给大家举一个例子，在咱们初始化之后，可以对咱们的病做代理工作，形成代理对象。所以我们也经常说a o p仅仅是i o c容器的一个扩展。同时，还有些病会实现一些aware接口，这些aware接口可以将一些特殊的病注入到当前的病当中。这个过程也是由spring容器统一调度完成的，这些具有拦截功能的病，我们通常把它称之为后置处理器，也叫bean post processor。关于post processor和aware相关的内容，在我的源码课程里边都有详细的介绍。如果你到这儿听不懂了，欢迎你到我的主页橱窗去拍一单，好好学一学，然后也支持你的哥。一来我们做个简单的回顾。一个病，首先需要收集元数据，紧接着要实例化，也就是创建对象。
郑鑫雨
00:04:05
然后呢进行依赖注入，然后呢进行初始化和销毁相关的方法。在这个过程当中可能还会遇到一些具有拦截性功能的病。比如咱们的bean post processor，它会在咱们初始化的前和后，对咱们的病做统一拦截，进行一些特殊处理。最后还有一些病实现了aware接口，会在特殊的时期统一调度，统一将一些特殊的病注入到该病当中。